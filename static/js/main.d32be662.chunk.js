(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{36:function(e,t,n){},38:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var s=n(1),a=n(9),c=n.n(a),o=(n(36),n(15)),i=n(12),r=n.n(i),l=n(19),u=n(3),d=(n(38),n(0));function j(e){var t;return t=e.isPlaying?"cd-thumb spin":"cd-thumb",Object(d.jsx)("div",{className:"cd",children:Object(d.jsx)("div",{className:t,style:{backgroundImage:"url('".concat(e.image,"')")}})})}function b(e){var t=Object(s.useState)("btn btn-random"),n=Object(u.a)(t,2),a=n[0],c=n[1],o=Object(s.useState)("btn btn-repeat"),i=Object(u.a)(o,2),r=i[0],l=i[1];Object(s.useEffect)((function(){e.songState.activeRepeat?l("btn btn-repeat active"):l("btn btn-repeat"),e.songState.activeRandom?c("btn btn-random active"):c("btn btn-random")}),[e.songState.activeRepeat,e.songState.activeRandom]);return Object(d.jsxs)("div",{className:"control",children:[Object(d.jsx)("div",{className:r,onClick:function(){e.modifySongState.modifyActiveRepeat(!e.songState.activeRepeat)},children:Object(d.jsx)("i",{className:"fas fa-redo"})}),Object(d.jsx)("div",{className:"btn btn-prev",onClick:function(){e.songState.activeRepeat?e.modifySongPlay(e.songIndex):e.songState.activeRandom?e.modifySongPlay(Math.round(Math.random()*e.songCount-1)):0===e.songIndex?e.modifySongPlay(e.songCount-1):e.modifySongPlay(e.songIndex-1)},children:Object(d.jsx)("i",{className:"fas fa-step-backward"})}),Object(d.jsxs)("div",{className:"btn btn-toggle-play",onClick:function(){e.modifyIsPlaying(e.isPlaying)},children:[Object(d.jsx)("i",{className:"fas fa-pause icon-pause"}),Object(d.jsx)("i",{className:"fas fa-play icon-play"})]}),Object(d.jsx)("div",{className:"btn btn-next",onClick:function(){e.songState.activeRepeat?e.modifySongPlay(e.songIndex):e.songState.activeRandom?e.modifySongPlay(Math.round(Math.random()*e.songCount-1)):e.songIndex===e.songCount-1?e.modifySongPlay(0):e.modifySongPlay(e.songIndex+1)},children:Object(d.jsx)("i",{className:"fas fa-step-forward"})}),Object(d.jsx)("div",{className:a,onClick:function(){e.modifySongState.modifyActiveRandom(!e.songState.activeRandom)},children:Object(d.jsx)("i",{className:"fas fa-random"})})]})}function m(e){var t=e.percentage,n=e.modifyPercentage,s=e.modifyCurruntTime,a=e.duration,c=e.cdThumb;return Object(d.jsx)("input",{id:"progress",onChange:function(e){!function(e){n(e.target.value),s(a*e.target.value/100)}(e)},className:"progress",type:"range",step:"1",min:"0",max:"100",style:{backgroundImage:"url(".concat(c,")")},value:t||"50"})}function g(e){return Object(d.jsxs)("header",{children:[Object(d.jsx)("h4",{children:"Now playing:"}),Object(d.jsx)("h2",{children:e.song}),Object(d.jsx)("h3",{children:e.singer})]})}function f(e){var t=Object(s.useState)(""),n=Object(u.a)(t,2),a=n[0],c=n[1];Object(s.useEffect)((function(){"usuk"===e.songRegion?c("https://trunkey2003.github.io/img/us.png"):c("https://trunkey2003.github.io/img/vn.png")}),[e.songRegion]);return Object(d.jsx)("div",{children:Object(d.jsx)("img",{id:"change-list-btn",src:a,alt:e.songRegion,onClick:function(){"usuk"===e.songRegion?e.modifySongRegion("vn"):e.modifySongRegion("usuk")}})})}function h(e){var t;return t=e.isPlaying?"song-wave song-wave-active":"song-wave",Object(d.jsxs)("div",{className:t,children:[Object(d.jsx)("span",{}),Object(d.jsx)("span",{}),Object(d.jsx)("span",{}),Object(d.jsx)("span",{}),Object(d.jsx)("span",{})]})}function O(e){return Object(d.jsx)("i",{className:"fas fa-paint-roller change-theme-btn",onClick:function(){e.modifyClassTheme()}})}function x(e){var t=e.songState,n=e.volumeIcon,a=e.volumeBackground,c=e.modifyClassTheme,o=e.modifySongRegion,i=e.songDetail,r=e.modifySongPlay,l=e.modifyIsPlaying,u=e.percentage,x=e.modifyPercentage,y=e.modifyCurruntTime,v=e.songCount,p=e.modifySongState,S=e.songs,N=e.ModifySongVolume;return Object(s.useEffect)((function(){0!==S.length&&r(i.songIndex,!0)}),[v]),Object(d.jsxs)("div",{className:"dashboard",children:[Object(d.jsxs)("div",{className:"volume-container",children:[Object(d.jsx)("div",{className:a}),Object(d.jsx)("i",{className:"".concat(n," volume-icon"),onClick:function(){N()}})]}),Object(d.jsx)(h,{isPlaying:i.isPlaying}),Object(d.jsx)(O,{modifyClassTheme:c}),Object(d.jsx)(f,{songRegion:i.songRegion,modifySongRegion:o}),Object(d.jsx)(g,{song:i.song,singer:i.singer}),Object(d.jsx)(j,{image:i.cdThumb,isPlaying:i.isPlaying,modifyIsPlaying:l}),Object(d.jsx)(b,{songState:t,modifySongState:p,songCount:v,songIndex:i.songIndex,isPlaying:i.isPlaying,modifySongPlay:r,modifyIsPlaying:l}),Object(d.jsx)(m,{cdThumb:i.cdThumb,duration:i.duration,percentage:u,modifyPercentage:x,modifyCurruntTime:y})]},"".concat(i.songRegion," ").concat(i.classTheme))}var y=n(6),v=n(11),p=n(21),S=n(20);function N(e){var t=e.handleAddSong,n=e.song,s=e.artists,a=e.image,c=e.path,o=e.id,i="";a=a||"https://i1.sndcdn.com/avatars-000606604806-j6ghpm-t500x500.jpg",s&&s.map((function(e,t){i+=e.name,s.length-1!=t&&(i+=" - ")}));var u=function(){var e=Object(l.a)(r.a.mark((function e(s){var o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(S.getSong)(s).then((function(e){return c=e.song.streamUrls[0].streamUrl}));case 2:return console.log(c),o={name:n,singer:i,path:c,image:a},e.next=6,t(o);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)("div",{className:"songs-modal",children:[Object(d.jsx)("div",{className:"songs-modal-img",children:Object(d.jsx)("img",{alt:"hello",src:a})}),Object(d.jsxs)("div",{className:"songs-modal-detail",children:[Object(d.jsx)("h5",{className:"songs-modal-detail-song",children:n}),Object(d.jsx)("h4",{className:"songs-modal-detail-singger",children:i}),Object(d.jsx)("button",{onClick:function(){u(o)},className:"song-modal-detail-button custom-download-btn",children:"Add"})]})]})}function k(e){var t=Object(s.useRef)(),n=Object(s.useState)(!1),a=Object(u.a)(n,2),c=a[0],o=a[1],i=Object(s.useState)([]),r=Object(u.a)(i,2),l=r[0],j=r[1],b=Object(s.useState)(!1),m=Object(u.a)(b,2),g=m[0],f=m[1],h=Object(s.useState)(!1),O=Object(u.a)(h,2),x=O[0],k=O[1],C=function(){return o(!1)};return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"add-song-section",onClick:function(){return o(!0)},children:"Add your own song"}),Object(d.jsxs)(y.a,{size:"lg",className:"custom-modal-01",show:c,onHide:C,children:[Object(d.jsxs)(y.a.Header,{closeButton:!0,children:[Object(d.jsx)(y.a.Title,{children:"Add your song to the playlist"}),Object(d.jsx)("button",{type:"button",className:"custom-btn-close-modal",onClick:C,"aria-label":"Close",children:Object(d.jsx)("i",{className:"fas fa-times"})})]}),Object(d.jsxs)(y.a.Body,{children:[Object(d.jsx)("h2",{children:"Search song"}),Object(d.jsx)("input",{ref:t,onChange:function(e){var n;(n=e.target.value)&&(f(!0),Object(S.searchByKeyword)(n).then((function(e){"success"==e.status?(console.log(e),t.current.value===n&&j(e.search.song.song),f(!1),k(!1)):"error"==e.status&&(console.log("Error search"),k(!0))})),console.log(g))},className:"search-song-input"}),Object(d.jsx)("div",{className:"songs-modal-container",children:x?Object(d.jsx)("div",{className:"error",children:Object(d.jsx)("img",{src:"https://firebasestorage.googleapis.com/v0/b/trunkey-music-player.appspot.com/o/error.jpg?alt=media&token=8411cc5c-4456-489d-b0a1-3eb129ddd564"})}):Object(d.jsx)(d.Fragment,{children:l?0==g?l.map((function(t,n){return Object(d.jsx)(N,{modifySongPlay:e.modifySongPlay,songs:e.songs,handleAddSong:e.handleAddSong,id:t.key,song:t.title,artists:t.artists,image:t.thumbnail})})):Object(d.jsx)("div",{className:"songs-modal-loading",children:Object(d.jsxs)("h4",{children:["Loading ",Object(d.jsx)(p.a,{animation:"border",className:"spinner",variant:"info"})]})}):""})})]}),Object(d.jsxs)(y.a.Footer,{children:[Object(d.jsx)(v.a,{variant:"secondary",className:"custom-close-btn",onClick:C,children:"Close"}),Object(d.jsx)(v.a,{variant:"primary",className:"custom-download-btn",onClick:C,children:"Save Changes"})]})]})]})}function C(e){var t="song",n=Object(s.useState)("option-songs-btn"),a=Object(u.a)(n,2),c=a[0],o=a[1],i=Object(s.useState)(!1),r=Object(u.a)(i,2),l=r[0],j=r[1],b=Object(s.useState)(!1),m=Object(u.a)(b,2),g=m[0],f=m[1],h=function(){return j(!1)},O=function(){return f(!1)};e.songIndex===e.index&&(t="song active");var x=function(){return o("option-songs-btn"===c?"option-songs-btn show-option-songs":"option-songs-btn")};return Object(d.jsxs)("div",{className:t,id:"song-".concat(e.index),onClick:function(){var t;t=e.index,e.modifySongPlay(t,!0),e.modifyIsPlaying(!1)},children:[Object(d.jsx)("div",{className:"thumb",style:{backgroundImage:"url('".concat(e.thumb,"')")}}),Object(d.jsxs)("div",{className:"body",children:[Object(d.jsx)("h3",{className:"title",children:e.title}),Object(d.jsx)("p",{className:"author",children:e.singer})]}),Object(d.jsxs)("div",{className:"option",onClick:function(e){e.stopPropagation()},children:[Object(d.jsx)("i",{className:"fas fa-ellipsis-h three-dot",onClick:function(){x()}}),Object(d.jsxs)("div",{className:c,children:[Object(d.jsxs)("button",{onClick:function(){return j(!0)},children:["Download ",Object(d.jsx)("i",{className:"fas fa-download"})]}),Object(d.jsxs)("button",{onClick:function(){return f(!0)},children:["Soft delete ",Object(d.jsx)("i",{className:"fas fa-trash"})]})]}),Object(d.jsxs)(y.a,{className:"custom-modal-01",show:l,onHide:h,children:[Object(d.jsxs)(y.a.Header,{closeButton:!0,children:[Object(d.jsxs)(y.a.Title,{children:["Download ",e.title]}),Object(d.jsx)("button",{type:"button",class:"custom-btn-close-modal",onClick:h,"aria-label":"Close",children:Object(d.jsx)("i",{className:"fas fa-times"})})]}),Object(d.jsxs)(y.a.Body,{children:["Are you sure you want to download this song ?",Object(d.jsxs)("div",{class:"thumbnail",children:[Object(d.jsx)("img",{alt:e.title,src:e.thumb,className:"thumbnail-img"}),Object(d.jsxs)("div",{className:"thumbnail-content",children:[Object(d.jsxs)("h5",{children:[Object(d.jsx)("b",{children:"Song"})," : ",e.title]}),Object(d.jsxs)("h5",{children:[Object(d.jsx)("b",{children:"by"})," ",e.singer]})]})]})]}),Object(d.jsxs)(y.a.Footer,{children:[Object(d.jsx)(v.a,{variant:"secondary",className:"custom-close-btn",onClick:h,children:"Close"}),Object(d.jsxs)(v.a,{className:"custom-download-btn",href:e.src,download:!0,children:["Download ",Object(d.jsx)("i",{className:"fas fa-download"})]})]})]}),Object(d.jsxs)(y.a,{className:"custom-modal-01 darkTheme",show:g,onHide:O,children:[Object(d.jsxs)(y.a.Header,{closeButton:!0,children:[Object(d.jsxs)(y.a.Title,{children:["Remove ",e.title," "]}),Object(d.jsx)("button",{type:"button",class:"custom-btn-close-modal","aria-label":"Close",onClick:O,children:Object(d.jsx)("i",{className:"fas fa-times"})})]}),Object(d.jsxs)(y.a.Body,{children:["Are you sure you want to remove this song from your list ? ",Object(d.jsx)("br",{})," ",Object(d.jsx)("span",{class:"custom-text-note",children:"Note that this song won't be deleted permanently from my database :)"}),Object(d.jsxs)("div",{class:"thumbnail",children:[Object(d.jsx)("img",{alt:e.title,src:e.thumb,className:"thumbnail-img"}),Object(d.jsxs)("div",{className:"thumbnail-content",children:[Object(d.jsxs)("h5",{children:[Object(d.jsx)("b",{children:"Song"})," : ",e.title]}),Object(d.jsxs)("h5",{children:[Object(d.jsx)("b",{children:"by"})," ",e.singer]})]})]})]}),Object(d.jsxs)(y.a.Footer,{children:[Object(d.jsx)(v.a,{variant:"secondary",className:"custom-close-btn",onClick:O,children:"Close"}),Object(d.jsxs)(v.a,{variant:"danger",className:"custom-delete-btn",onClick:function(){e.handleSoftDelte(e.index),x(),O()},children:["Delete ",Object(d.jsx)("i",{className:"fas fa-trash"})]})]})]})]})]})}function P(e){return Object(d.jsxs)("div",{className:"playlist",children:[e.songs&&e.songs.map((function(t,n){return Object(d.jsx)(C,{handleSoftDelte:e.handleSoftDelte,thumb:t.image,title:t.name,src:t.path,singer:t.singer,songIndex:e.songIndex,index:n,modifySongPlay:e.modifySongPlay,modifyIsPlaying:e.modifyIsPlaying},n)})),Object(d.jsx)(k,{modifySongPlay:e.modifySongPlay,songs:e.songs,handleAddSong:e.handleAddSong})]},e.songRegion+" "+e.classTheme)}function R(){return Object(d.jsx)("div",{className:"Loading",children:Object(d.jsxs)("h1",{children:["Loading songs from database ",Object(d.jsx)(p.a,{animation:"border",variant:"danger"})]})})}var w=function(){var e,t=Object(s.useRef)(),n=Object(s.useRef)(),a=Object(s.useState)("usuk"),c=Object(u.a)(a,2),i=c[0],j=c[1],b=Object(s.useState)([]),m=Object(u.a)(b,2),g=m[0],f=m[1],h=Object(s.useState)(!1),O=Object(u.a)(h,2),y=O[0],v=O[1],p=Object(s.useState)(!0),S=Object(u.a)(p,2),N=S[0],k=S[1],C=Object(s.useRef)(),w=Object(s.useState)(0),I=Object(u.a)(w,2),T=I[0],A=I[1],D=Object(s.useState)(""),B=Object(u.a)(D,2),F=B[0],E=B[1],M=Object(s.useState)(""),H=Object(u.a)(M,2),L=H[0],U=H[1],V=Object(s.useState)(""),J=Object(u.a)(V,2),z=J[0],K=J[1],q=Object(s.useState)(""),G=Object(u.a)(q,2),Q=G[0],W=G[1],X=Object(s.useState)(!1),Y=Object(u.a)(X,2),Z=Y[0],$=Y[1],_=Object(s.useState)(0),ee=Object(u.a)(_,2),te=ee[0],ne=ee[1],se=Object(s.useState)(0),ae=Object(u.a)(se,2),ce=ae[0],oe=ae[1],ie=Object(s.useState)(!1),re=Object(u.a)(ie,2),le=re[0],ue=re[1],de=Object(s.useState)(!1),je=Object(u.a)(de,2),be=je[0],me=je[1],ge=Object(s.useState)(!0),fe=Object(u.a)(ge,2),he=fe[0],Oe=fe[1],xe=Object(s.useState)("defualt-theme"),ye=Object(u.a)(xe,2),ve=ye[0],pe=ye[1],Se=Object(s.useState)(1),Ne=Object(u.a)(Se,2),ke=Ne[0],Ce=Ne[1],Pe=Object(s.useState)("volume-background"),Re=Object(u.a)(Pe,2),we=Re[0],Ie=Re[1],Te=Object(s.useState)("fas fa-volume-up"),Ae=Object(u.a)(Te,2),De=Ae[0],Be=Ae[1],Fe={src:F,cdThumb:L,song:z,singer:Q,isPlaying:Z,songIndex:T,duration:te,classTheme:ve,songRegion:i};Object(s.useEffect)((function(){var e=function(){var e=Object(l.a)(r.a.mark((function e(){var s,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!he){e.next=17;break}return k(!0),e.next=4,fetch("https://api-trunkeymusicplayer.herokuapp.com/api/us").then((function(e){return e.json()})).then((function(e){n.current=e})).catch((function(e){return console.log(e)}));case 4:return e.next=6,fetch("https://api-trunkeymusicplayer.herokuapp.com/api/vn").then((function(e){return e.json()})).then((function(e){t.current=e})).catch((function(e){return console.log(e)})).finally((function(){k(!1),Oe(!1)}));case 6:s="usuk"===i?n.current:t.current,f(s),U(s[0].image),K(s[0].name),W(s[0].singer),E(s[0].path),A(0),Ue(0),oe(0),e.next=25;break;case 17:a&&"usuk"===i&&(n.current=a),a&&"vn"===i&&(t.current=a),a="usuk"===i?n.current:t.current,f(a),U(a[0].image),K(a[0].name),W(a[0].singer),E(a[0].path);case 25:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[i,he]),Object(s.useEffect)((function(){C.current&&(C.current.volume=ke)}),[ke,C.current]),Z&&C.current?(e="player playing",C.current.play()):C.current?(e="player",C.current.pause()):e="player";var Ee=function(e){$(!e)},Me=function(e,t){var n;g&&(t||(le&&(e=Math.round(Math.random()*g.length)),be&&(e=T)),g[e]&&(A(e),Ue(0),oe(0),n=g[e].name,K(n),function(e){W(e)}(g[e].singer),function(e){E(e)}(g[e].path),function(e){U(e)}(g[e].image)))},He={modifyActiveRandom:function(e){ue(e)},modifyActiveRepeat:function(e){me(e)}},Le={activeRandom:le,activeRepeat:be},Ue=function(e){C.current.currentTime=e},Ve=function(e){var t=Object(o.a)(g);t.push(e),f(t),v(!0)};return Object(s.useEffect)((function(){y&&(Me(g.length-1,!0),v(!1))}),[Ve,y]),Object(d.jsx)("div",{className:"".concat(e," ").concat(ve),children:!0===N?Object(d.jsx)(R,{}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(x,{songState:Le,volumeIcon:De,volumeBackground:we,ModifySongVolume:function(e){switch(ke){case 0:Ce(.4),Ie("volume-background-02"),Be("fas fa-volume-down");break;case.4:Ce(.65),Ie("volume-background-03"),Be("fas fa-volume-down");break;case.65:Ce(.8),Ie("volume-background-04"),Be("fas fa-volume-down");break;case.8:Ce(1),Ie("volume-background"),Be("fas fa-volume-up");break;case 1:Ce(0),Ie("volume-background-01"),Be("fas fa-volume-mute");break;default:alert("Sound Volume error")}},modifyClassTheme:function(){pe("defualt-theme"===ve?"custom-theme-01":"custom-theme-01"===ve?"custom-theme-02":"custom-theme-02"===ve?"custom-theme-03":"defualt-theme")},modifySongRegion:function(e){A(0),j(e)},modifySongState:He,songCount:g.length,songDetail:Fe,modifyIsPlaying:Ee,modifySongPlay:Me,percentage:ce,modifyPercentage:function(e){oe(e)},modifyCurruntTime:Ue,songs:g}),Object(d.jsx)("audio",{ref:C,id:"audio",onTimeUpdate:function(e){return function(e){var t=e.target.currentTime/te*100;oe(t),100===ce&&(T===g.length-1?Me(0):Me(T+1))}(e)},src:F,onLoadedData:function(e){ne(e.currentTarget.duration)}}),Object(d.jsx)(P,{classTheme:ve,songRegion:i,handleSoftDelte:function(e){var t=Object(o.a)(g);t.splice(e,1),f(t)},songIndex:T,src:F,modifySongPlay:Me,modifyIsPlaying:Ee,songs:g,handleAddSong:Ve})]})})};var I=function(){return Object(d.jsx)(w,{})},T=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,71)).then((function(t){var n=t.getCLS,s=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),s(e),a(e),c(e),o(e)}))};c.a.render(Object(d.jsx)(I,{}),document.getElementById("root")),T()}},[[69,1,2]]]);
//# sourceMappingURL=main.d32be662.chunk.js.map